const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-CpS3CVMr.js","assets/index-D7M7G7ZL.js","assets/index-DWlWiI9d.css","assets/_plugin-vue_export-helper-C3Z-fnCw.js","assets/web-CtRBQQNq.js"])))=>i.map(i=>d[i]);
import{_ as G,o as z,r as N}from"./index-D7M7G7ZL.js";import{s as W}from"./_plugin-vue_export-helper-C3Z-fnCw.js";/*! Capacitor: https://capacitorjs.com/ - MIT License */var T;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(T||(T={}));class R extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const X=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},Q=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:X(t),i=()=>s()!=="web",d=a=>{const o=h.get(a);return!!(o!=null&&o.platforms.has(s())||l(a))},l=a=>{var o;return(o=n.PluginHeaders)===null||o===void 0?void 0:o.find(p=>p.name===a)},u=a=>t.console.error(a),h=new Map,c=(a,o={})=>{const p=h.get(a);if(p)return console.warn('Capacitor plugin "'.concat(a,'" already registered. Cannot register plugins twice.')),p.proxy;const P=s(),L=l(a);let v;const J=async()=>(!v&&P in o?v=typeof o[P]=="function"?v=await o[P]():v=o[P]:e!==null&&!v&&"web"in o&&(v=typeof o.web=="function"?v=await o.web():v=o.web),v),V=(f,w)=>{var y,b;if(L){const E=L==null?void 0:L.methods.find(m=>w===m.name);if(E)return E.rtype==="promise"?m=>n.nativePromise(a,w.toString(),m):(m,A)=>n.nativeCallback(a,w.toString(),m,A);if(f)return(y=f[w])===null||y===void 0?void 0:y.bind(f)}else{if(f)return(b=f[w])===null||b===void 0?void 0:b.bind(f);throw new R('"'.concat(a,'" plugin is not implemented on ').concat(P),T.Unimplemented)}},U=f=>{let w;const y=(...b)=>{const E=J().then(m=>{const A=V(m,f);if(A){const O=A(...b);return w=O==null?void 0:O.remove,O}else throw new R('"'.concat(a,".").concat(f,'()" is not implemented on ').concat(P),T.Unimplemented)});return f==="addListener"&&(E.remove=async()=>w()),E};return y.toString=()=>"".concat(f.toString(),"() { [capacitor code] }"),Object.defineProperty(y,"name",{value:f,writable:!1,configurable:!1}),y},F=U("addListener"),j=U("removeListener"),Y=(f,w)=>{const y=F({eventName:f},w),b=async()=>{const m=await y;j({eventName:f,callbackId:m},w)},E=new Promise(m=>y.then(()=>m({remove:b})));return E.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await b()},E},_=new Proxy({},{get(f,w){switch(w){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return L?Y:F;case"removeListener":return j;default:return U(w)}}});return r[a]=_,h.set(a,{name:a,proxy:_,platforms:new Set([...Object.keys(o),...L?[P]:[]])}),_};return n.convertFileSrc||(n.convertFileSrc=a=>a),n.getPlatform=s,n.handleError=u,n.isNativePlatform=i,n.isPluginAvailable=d,n.registerPlugin=c,n.Exception=R,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},Z=t=>t.Capacitor=Q(t),D=Z(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),S=D.registerPlugin;class K{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const d=async()=>this.removeListener(e,n);return Promise.resolve({remove:d})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new D.Exception(e,T.Unimplemented)}unavailable(e="not available"){return new D.Exception(e,T.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const I=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),M=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class ee extends K{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=M(s).trim(),i=M(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=I(e.key),r=I(e.value),s="; expires=".concat((e.expires||"").replace("expires=","")),i=(e.path||"/").replace("path=",""),d=e.url!=null&&e.url.length>0?"domain=".concat(e.url):"";document.cookie="".concat(n,"=").concat(r||"").concat(s,"; path=").concat(i,"; ").concat(d,";")}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie="".concat(e.key,"=; Max-Age=0")}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat(new Date().toUTCString(),";path=/"))}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}S("CapacitorCookies",{web:()=>new ee});const te=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),ne=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,d)=>(s[i]=t[e[d]],s),{})},se=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,d]=s;let l,u;return Array.isArray(d)?(u="",d.forEach(h=>{l=e?encodeURIComponent(h):h,u+="".concat(i,"=").concat(l,"&")}),u.slice(0,-1)):(l=e?encodeURIComponent(d):d,u="".concat(i,"=").concat(l)),"".concat(r,"&").concat(u)},"").substr(1):null,re=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=ne(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[d,l]of Object.entries(t.data||{}))i.set(d,l);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((l,u)=>{i.append(u,l)});else for(const l of Object.keys(t.data))i.append(l,t.data[l]);n.body=i;const d=new Headers(n.headers);d.delete("content-type"),n.headers=d}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class ie extends K{async request(e){const n=re(e,e.webFetchExtra),r=se(e.params,e.shouldEncodeUrlParams),s=r?"".concat(e.url,"?").concat(r):e.url,i=await fetch(s,n),d=i.headers.get("content-type")||"";let{responseType:l="text"}=i.ok?e:{};d.includes("application/json")&&(l="json");let u,h;switch(l){case"arraybuffer":case"blob":h=await i.blob(),u=await te(h);break;case"json":u=await i.json();break;case"document":case"text":default:u=await i.text()}const c={};return i.headers.forEach((a,o)=>{c[o]=a}),{data:u,headers:c,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}S("CapacitorHttp",{web:()=>new ie});var H;(function(t){t[t.Sunday=1]="Sunday",t[t.Monday=2]="Monday",t[t.Tuesday=3]="Tuesday",t[t.Wednesday=4]="Wednesday",t[t.Thursday=5]="Thursday",t[t.Friday=6]="Friday",t[t.Saturday=7]="Saturday"})(H||(H={}));const k=S("LocalNotifications",{web:()=>G(()=>import("./web-CpS3CVMr.js"),__vite__mapDeps([0,1,2,3])).then(t=>new t.LocalNotificationsWeb)});function ae(){return{requestPermissions:async()=>{try{await k.requestPermissions()}catch(r){console.log("Browser tidak support notifikasi native")}},scheduleNotification:async r=>{if(!r.dueDate)return;const s=new Date(r.dueDate);if(s.setDate(s.getDate()-1),s.setHours(7,0,0,0),!(s.getTime()<Date.now()))try{await k.schedule({notifications:[{title:"Reminder Tugas",body:"Jangan lupa: ".concat(r.title," deadline hari ini!"),id:r.id,schedule:{at:s},sound:void 0,attachments:void 0,actionTypeId:"",extra:null}]})}catch(i){console.error("Gagal set notifikasi",i)}},cancelNotification:async r=>{try{await k.cancel({notifications:[{id:r}]})}catch(s){}}}}function oe(t){t.CapacitorUtils.Synapse=new Proxy({},{get(e,n){return new Proxy({},{get(r,s){return(i,d,l)=>{const u=t.Capacitor.Plugins[n];if(u===void 0){l(new Error("Capacitor plugin ".concat(n," not found")));return}if(typeof u[s]!="function"){l(new Error("Method ".concat(s," not found in Capacitor plugin ").concat(n)));return}(async()=>{try{const h=await u[s](i);d(h)}catch(h){l(h)}})()}}})}})}function ce(t){t.CapacitorUtils.Synapse=new Proxy({},{get(e,n){return t.cordova.plugins[n]}})}function le(t=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!t?oe(window):window.cordova!==void 0&&ce(window))}var C;(function(t){t.Documents="DOCUMENTS",t.Data="DATA",t.Library="LIBRARY",t.Cache="CACHE",t.External="EXTERNAL",t.ExternalStorage="EXTERNAL_STORAGE",t.ExternalCache="EXTERNAL_CACHE",t.LibraryNoCloud="LIBRARY_NO_CLOUD",t.Temporary="TEMPORARY"})(C||(C={}));var q;(function(t){t.UTF8="utf8",t.ASCII="ascii",t.UTF16="utf16"})(q||(q={}));const $=S("Filesystem",{web:()=>G(()=>import("./web-CtRBQQNq.js"),__vite__mapDeps([4,1,2,3])).then(t=>new t.FilesystemWeb)});le();const B="my_tasks_app",x="NyatetTugas",g=N([]);function fe(){const{scheduleNotification:t,cancelNotification:e}=ae(),n=()=>{g.value=W.get(B,[])},r=()=>{localStorage.setItem(B,JSON.stringify(g.value))},s=async()=>{try{await $.mkdir({path:x,directory:C.Documents,recursive:!0})}catch(c){}},i=c=>{const a={id:Date.now(),title:c.title||"Tanpa Judul",description:c.description||"",dueDate:c.dueDate||"",courseId:c.courseId||null,priority:c.priority||"Sedang",completed:!1,attachments:c.attachments||[]};g.value.unshift(a),r(),t(a)},d=(c,a)=>{const o=g.value.findIndex(p=>p.id===c);if(o!==-1){g.value[o]={...g.value[o],...a},r();const p=g.value[o];p.completed?e(c):t(p)}},l=async c=>{const a=g.value.find(o=>o.id===c);if(a!=null&&a.attachments)for(const o of a.attachments)try{await $.deleteFile({path:"".concat(x,"/").concat(o.filePath),directory:C.Documents})}catch(p){console.log("File cleanup skip")}g.value=g.value.filter(o=>o.id!==c),r(),e(c)},u=c=>{g.value=c,r(),c.forEach(a=>{a.completed||t(a)})},h=async()=>{try{await s();const c=await $.readdir({path:x,directory:C.Documents}),a=g.value.flatMap(o=>o.attachments.map(p=>p.filePath));for(const o of c.files)a.includes(o.name)||(await $.deleteFile({path:"".concat(x,"/").concat(o.name),directory:C.Documents}),console.log("Menghapus file sampah: ".concat(o.name)))}catch(c){console.error("Cleanup gagal",c)}};return z(n),{tasks:g,addTask:i,updateTask:d,deleteTask:l,importTasks:u,ensureFolder:s,cleanupStorage:h}}export{C as D,q as E,$ as F,K as W,ae as a,re as b,S as r,fe as u};
