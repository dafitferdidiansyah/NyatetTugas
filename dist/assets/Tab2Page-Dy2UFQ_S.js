import{d as O,r as V,a5 as K,g as u,j as e,p as a,a6 as M,f as t,S as A,U as L,L as c,V as $,W as j,a7 as d,a8 as D,Y as J,E as P,Z as U,v as G,b as W,_,a1 as C,i as z,G as H,a9 as R,aa as Y,ab as Z,a3 as q,aj as k,ac as w,e as r,ak as Q,I as X,al as aa,am as ea,an as ta}from"./index-2ytOguj-.js";import{u as na}from"./useTasks-CxOXygNd.js";const ia=O({__name:"Tab2Page",setup(la){const{courses:f,addCourse:m,deleteCourse:b,updateCourse:N,loadData:x}=na(),p=V(null);K(()=>{x()});const B=l=>{b(l)},v=async l=>{await(await k.create({header:"Edit Mata Kuliah",inputs:[{name:"newCourseName",type:"text",value:l,placeholder:"Nama Mata Kuliah"}],buttons:[{text:"Batal",role:"cancel"},{text:"Simpan",handler:o=>{o.newCourseName&&o.newCourseName.trim()!==l&&N(l,o.newCourseName.trim())}}]})).present()},S=async()=>{await(await k.create({header:"Tambah Mata Kuliah",inputs:[{name:"courseName",type:"text",placeholder:"Nama Mata Kuliah Baru"}],buttons:[{text:"Batal",role:"cancel"},{text:"Simpan",handler:n=>{n.courseName&&m(n.courseName.trim())}}]})).present()},E=()=>{var l;(l=p.value)==null||l.click()},F=async l=>{const n=l.target;if(!n.files||n.files.length===0)return;const o=n.files[0],s=new FileReader;s.onload=async T=>{var I;try{const h=(I=T.target)==null?void 0:I.result,i=JSON.parse(h);if(!Array.isArray(i))throw new Error("Format JSON tidak valid.");let g=0;i.forEach(y=>{typeof y=="string"&&(m(y.trim()),g++)}),await(await w.create({message:"".concat(g," mata kuliah berhasil diimpor!"),duration:2e3,color:"success"})).present()}catch(h){await(await w.create({message:"Gagal mengimpor file. Pastikan format JSON sudah benar.",duration:3e3,color:"danger"})).present()}finally{n&&(n.value="")}},s.readAsText(o)};return(l,n)=>(r(),u(a(M),null,{default:e(()=>[t(a(J),null,{default:e(()=>[t(a(A),{color:"primary"},{default:e(()=>[t(a(L),null,{default:e(()=>[...n[1]||(n[1]=[c("Mata Kuliah",-1)])]),_:1}),t(a($),{slot:"end"},{default:e(()=>[t(a(j),{onClick:E},{default:e(()=>[t(a(d),{slot:"icon-only",icon:a(D)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),t(a(q),{fullscreen:!0},{default:e(()=>[P("input",{type:"file",ref_key:"fileInput",ref:p,onChange:F,accept:".json",style:{display:"none"}},null,544),t(a(U),null,{default:e(()=>[a(f).length===0?(r(),u(a(_),{key:0},{default:e(()=>[t(a(C),{class:"ion-text-center"},{default:e(()=>[...n[2]||(n[2]=[c("Belum ada mata kuliah.",-1)])]),_:1})]),_:1})):G("",!0),(r(!0),W(H,null,z(a(f),o=>(r(),u(a(Q),{key:o},{default:e(()=>[t(a(_),{button:"",onClick:s=>v(o)},{default:e(()=>[t(a(C),null,{default:e(()=>[c(X(o),1)]),_:2},1024)]),_:2},1032,["onClick"]),t(a(aa),{side:"end"},{default:e(()=>[t(a(ea),{color:"danger",onClick:s=>B(o)},{default:e(()=>[t(a(d),{slot:"icon-only",icon:a(ta)},null,8,["icon"])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(a(R),{vertical:"bottom",horizontal:"end",slot:"fixed"},{default:e(()=>[t(a(Y),{onClick:n[0]||(n[0]=o=>S())},{default:e(()=>[t(a(d),{icon:a(Z)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}))}});export{ia as default};
