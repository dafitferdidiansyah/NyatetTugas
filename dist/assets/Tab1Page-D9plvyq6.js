const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-CIRnU3Rc.js","assets/useTasks-D7itPPa9.js","assets/index-D7M7G7ZL.js","assets/index-DWlWiI9d.css","assets/_plugin-vue_export-helper-C3Z-fnCw.js"])))=>i.map(i=>d[i]);
import{_ as V,d as j,r as A,o as G,c as d,a as h,w as l,u as e,I as H,b as s,e as M,f as q,g as p,h as K,i as a,j as U,k as $,t as r,l as x,n as W,m as D,p as Y,q as Q,s as X,F as Z,v as c,x as tt,y as et,z as v,A as g,B as at,C as f,D as st,E as lt,G as nt,H as ot,J as m,K as it,L as rt}from"./index-D7M7G7ZL.js";import{r as ut,u as dt,a as ct,F as pt,E as gt,D as ft}from"./useTasks-D7itPPa9.js";import{u as mt,s as _t,_ as ht}from"./_plugin-vue_export-helper-C3Z-fnCw.js";const vt=ut("Share",{web:()=>V(()=>import("./web-CIRnU3Rc.js"),__vite__mapDeps([0,1,2,3,4])).then(y=>new y.ShareWeb)}),yt={class:"stats-section"},kt={class:"progress-info"},It={class:"progress-text"},St={class:"progress-numbers"},bt={class:"progress-bar-container"},wt={class:"stats-section ion-margin-top"},Tt={class:"stats-section ion-margin-top"},Ct={class:"prio-box prio-high"},xt={class:"prio-box prio-med"},Dt={class:"prio-box prio-low"},Nt={class:"ion-margin-top"},Bt=j({__name:"Tab1Page",setup(y){const{tasks:i,importTasks:N,ensureFolder:B,cleanupStorage:P}=dt(),{courses:k}=mt(),{requestPermissions:O}=ct(),I=A(null);G(()=>{O()});const F=d(()=>i.value.filter(n=>!n.completed).length),S=d(()=>i.value.filter(n=>n.completed).length),b=d(()=>i.value.length===0?0:Math.round(S.value/i.value.length*100)),_=d(()=>({high:i.value.filter(n=>n.priority==="Tinggi").length,med:i.value.filter(n=>n.priority==="Sedang").length,low:i.value.filter(n=>n.priority==="Rendah").length})),w=d(()=>k.value.map(n=>{const t=i.value.filter(o=>o.courseId===n.id);return{name:n.name,count:t.length,pending:t.filter(o=>!o.completed).length}}).sort((n,t)=>t.count-n.count).slice(0,3)),E=async()=>{const n={tasks:i.value,courses:k.value,exportedAt:new Date().toISOString()},t="backup-nyatettugas-".concat(Date.now(),".json");try{await B();const o=await pt.writeFile({path:"NyatetTugas/".concat(t),data:JSON.stringify(n,null,2),directory:ft.Documents,encoding:gt.UTF8});await vt.share({title:"Backup NyatetTugas",url:o.uri,dialogTitle:"Simpan Backup"})}catch(o){alert("Gagal export data.")}},J=()=>{var n;return(n=I.value)==null?void 0:n.click()},R=async n=>{var T;const t=(T=n.target.files)==null?void 0:T[0];if(!t)return;const o=new FileReader;o.onload=async L=>{var C;try{const u=JSON.parse((C=L.target)==null?void 0:C.result);await(await ot.create({header:"Timpa Data?",message:"Data saat ini akan diganti sepenuhnya.",buttons:[{text:"Batal",role:"cancel"},{text:"Ya, Timpa",handler:()=>{u.tasks&&N(u.tasks),u.courses&&(_t.set("my_courses_app",u.courses),window.location.reload())}}]})).present()}catch(u){alert("JSON tidak valid!")}},o.readAsText(t)},z=async()=>{await P(),alert("Storage bersih!")};return(n,t)=>(m(),h(e(H),null,{default:l(()=>[s(e(K),null,{default:l(()=>[s(e(M),null,{default:l(()=>[s(e(q),null,{default:l(()=>[...t[0]||(t[0]=[p("Dashboard Statistik",-1)])]),_:1})]),_:1})]),_:1}),s(e(nt),{class:"ion-padding"},{default:l(()=>[a("div",yt,[t[2]||(t[2]=a("h3",null,"Progres Tugas",-1)),s(e(U),{class:"progress-card"},{default:l(()=>[s(e($),null,{default:l(()=>[a("div",kt,[a("div",It,[a("h1",null,r(b.value)+"%",1),t[1]||(t[1]=a("p",null,"Tugas Selesai",-1))]),a("div",St,[s(e(x),{color:"success"},{default:l(()=>[p(r(S.value)+" Completed",1)]),_:1}),s(e(x),{color:"warning"},{default:l(()=>[p(r(F.value)+" Pending",1)]),_:1})])]),a("div",bt,[a("div",{class:"progress-fill",style:W({width:b.value+"%"})},null,4)])]),_:1})]),_:1})]),a("div",wt,[t[4]||(t[4]=a("h3",null,"Beban Mata Kuliah",-1)),s(e(D),{class:"stats-list"},{default:l(()=>[(m(!0),Y(Z,null,X(w.value,o=>(m(),h(e(c),{key:o.name,lines:"none"},{default:l(()=>[s(e(g),{icon:e(it),slot:"start",color:"primary"},null,8,["icon"]),s(e(f),null,{default:l(()=>[a("h2",null,r(o.name),1),a("p",null,r(o.count)+" Tugas Total",1)]),_:2},1024),s(e(rt),{slot:"end",color:"primary"},{default:l(()=>[p(r(o.pending)+" Pending",1)]),_:2},1024)]),_:2},1024))),128)),w.value.length===0?(m(),h(e(c),{key:0,lines:"none"},{default:l(()=>[...t[3]||(t[3]=[a("p",{class:"empty-text"},"Belum ada data matkul.",-1)])]),_:1})):Q("",!0)]),_:1})]),a("div",Tt,[t[8]||(t[8]=a("h3",null,"Distribusi Prioritas",-1)),s(e(tt),{class:"ion-no-padding"},{default:l(()=>[s(e(et),null,{default:l(()=>[s(e(v),{size:"4"},{default:l(()=>[a("div",Ct,[t[5]||(t[5]=a("small",null,"Tinggi",-1)),a("h2",null,r(_.value.high),1)])]),_:1}),s(e(v),{size:"4"},{default:l(()=>[a("div",xt,[t[6]||(t[6]=a("small",null,"Sedang",-1)),a("h2",null,r(_.value.med),1)])]),_:1}),s(e(v),{size:"4"},{default:l(()=>[a("div",Dt,[t[7]||(t[7]=a("small",null,"Rendah",-1)),a("h2",null,r(_.value.low),1)])]),_:1})]),_:1})]),_:1})]),a("div",Nt,[t[12]||(t[12]=a("h3",null,"Sistem & Backup",-1)),s(e(D),{class:"settings-list"},{default:l(()=>[s(e(c),{button:"",onClick:E,lines:"full"},{default:l(()=>[s(e(g),{icon:e(at),slot:"start",color:"primary"},null,8,["icon"]),s(e(f),null,{default:l(()=>[...t[9]||(t[9]=[a("h2",null,"Export JSON",-1),a("p",null,"Simpan backup ke Documents",-1)])]),_:1})]),_:1}),s(e(c),{button:"",onClick:J,lines:"full"},{default:l(()=>[a("input",{type:"file",ref_key:"fileInput",ref:I,style:{display:"none"},accept:".json",onChange:R},null,544),s(e(g),{icon:e(st),slot:"start",color:"primary"},null,8,["icon"]),s(e(f),null,{default:l(()=>[...t[10]||(t[10]=[a("h2",null,"Import JSON",-1),a("p",null,"Pulihkan data dari file",-1)])]),_:1})]),_:1}),s(e(c),{button:"",onClick:z,lines:"none"},{default:l(()=>[s(e(g),{icon:e(lt),slot:"start",color:"danger"},null,8,["icon"]),s(e(f),null,{default:l(()=>[...t[11]||(t[11]=[a("h2",null,"Bersihkan Storage",-1),a("p",null,"Hapus file sampah",-1)])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}))}}),Jt=ht(Bt,[["__scopeId","data-v-e4675271"]]);export{Jt as default};
