System.register(["./index-legacy-D6XJ9JqQ.js","./_plugin-vue_export-helper-legacy-C_w-mMUU.js","./useTasks-legacy-D0jyNp1b.js"],function(e,a){"use strict";var t,l,i,n,o,d,r,s,u,c,p,m,f,g,v,h,y,b,x,_,k,w,T,D,C,V,I,z,F,S,U,P,$,M,B,L,N,R,O,G,j,H,W,A,E,J,K,q,Q,X,Y,Z,ee,ae,te,le,ie,ne,oe;return{setters:[e=>{t=e.d,l=e.r,i=e.M,n=e.a,o=e.u,d=e.N,r=e.w,s=e.b,u=e.h,c=e.e,p=e.f,m=e.g,f=e.t,g=e.O,v=e.P,h=e.G,y=e.i,b=e.v,x=e.C,_=e.Q,k=e.x,w=e.y,T=e.z,D=e.R,C=e.p,V=e.S,I=e.s,z=e.F,F=e.q,S=e.T,U=e.A,P=e.U,$=e.V,M=e.W,B=e.J,L=e.X,N=e.Y,R=e.Z,O=e.$,G=e.c,j=e.I,H=e.a0,W=e.a1,A=e.m,E=e.a2,J=e.a3,K=e.a4,q=e.a5,Q=e.l,X=e.a6,Y=e.a7,Z=e.a8,ee=e.a9},e=>{ae=e.u,te=e._},e=>{le=e.r,ie=e.u,ne=e.F,oe=e.D}],execute:function(){var a=document.createElement("style");a.textContent=".input-item[data-v-dc85763b]{--background: var(--ion-item-background);margin-bottom:12px;border:1px solid #333;border-radius:8px}.text-danger[data-v-dc85763b]{color:var(--ion-color-danger)}.rich-input-wrapper[data-v-dc85763b]{margin-top:15px}.rich-label[data-v-dc85763b]{font-size:12px;color:#bbb;margin-left:5px;margin-bottom:5px;display:block}.rich-container[data-v-dc85763b]{border:1px solid #444;border-radius:8px;background:#fff!important;display:flex;flex-direction:column;overflow:hidden}.custom-textarea[data-v-dc85763b]{--padding-start: 12px;--padding-end: 12px;--padding-top: 12px;--color: #000000 !important;--placeholder-color: #666666 !important;border:none;margin:0}.attachments-area[data-v-dc85763b]{display:flex;flex-wrap:wrap;gap:8px;padding:0 12px 8px}.file-chip[data-v-dc85763b]{background:#f0f2f5;border:1px solid #dcdcdc;border-radius:20px;padding:6px 10px;display:flex;align-items:center;font-size:11px;cursor:pointer;color:#333!important}.chip-icon[data-v-dc85763b]{font-size:16px;margin-right:6px;color:#555}.chip-text[data-v-dc85763b]{max-width:100px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#333}.rich-toolbar[data-v-dc85763b]{border-top:1px solid #ddd;padding:4px 8px;display:flex;align-items:center;background:#f0f0f0}.placeholder-text[data-v-dc85763b]{font-size:11px;color:#999;margin-left:8px;font-style:italic}.btn-save[data-v-dc85763b]{margin-top:20px;--border-radius: 8px;font-weight:700}.empty-state[data-v-09ae5eb3]{text-align:center;margin-top:100px;color:#888}.large-icon[data-v-09ae5eb3]{font-size:64px;margin-bottom:10px;color:#ccc}.simple-search[data-v-09ae5eb3]{--box-shadow: none;padding-top:0;padding-bottom:0}.meta-end[data-v-09ae5eb3]{display:flex;align-items:center}\n/*$vite$:1*/",document.head.appendChild(a);const de=le("FileOpener"),re={class:"rich-input-wrapper"},se={class:"rich-container"},ue={key:0,class:"attachments-area"},ce=["onClick"],pe={class:"chip-text"},me=["onClick"],fe={class:"rich-toolbar"},ge={key:0,class:"placeholder-text"},ve=t({__name:"TaskModal",props:{isOpen:{type:Boolean},editingId:{},initialData:{}},emits:["close","save"],setup(e,{emit:a}){const t=e,G=a,{courses:j}=ae(),{ensureFolder:H}=ie(),W=l(null),A=l({title:"",description:"",dueDate:"",courseId:null,priority:"Sedang",attachments:[]});i(()=>t.isOpen,e=>{e&&t.initialData?A.value={...t.initialData,attachments:[...t.initialData.attachments||[]]}:e&&(A.value={title:"",description:"",dueDate:"",courseId:null,priority:"Sedang",attachments:[]})});const E=()=>{var e;return null===(e=W.value)||void 0===e?void 0:e.click()},J=async e=>{const a=e.target.files;if(a&&0!==a.length){for(let e=0;e<a.length;e++){const t=a[e];if(t.size>52428800){(await M.create({message:`File ${t.name} terlalu besar (Maks 50MB)`,duration:3e3,color:"danger"})).present();continue}const l=new FileReader;l.readAsDataURL(t),l.onload=async()=>{const a=l.result.split(",")[1],i=Date.now()+"_"+e+"_"+t.name;try{await H(),await ne.writeFile({path:`NyatetTugas/${i}`,data:a,directory:oe.Documents}),A.value.attachments.push({filePath:i,fileName:t.name,fileType:t.type})}catch(n){console.error("Gagal simpan file:",n)}}}W.value&&(W.value.value="")}},K=()=>G("save",A.value);return(a,t)=>(B(),n(o(d),{"is-open":e.isOpen,onDidDismiss:t[6]||(t[6]=e=>a.$emit("close"))},{default:r(()=>[s(o(u),null,{default:r(()=>[s(o(c),{color:"primary"},{default:r(()=>[s(o(p),null,{default:r(()=>[m(f(e.editingId?"Edit Tugas":"Tugas Baru"),1)]),_:1}),s(o(g),{slot:"end"},{default:r(()=>[s(o(v),{onClick:t[0]||(t[0]=e=>a.$emit("close"))},{default:r(()=>[...t[7]||(t[7]=[m("Batal",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),s(o(h),{class:"ion-padding bg-light"},{default:r(()=>[s(o(b),{class:"input-item"},{default:r(()=>[s(o(x),{position:"stacked"},{default:r(()=>[...t[8]||(t[8]=[m("Judul Tugas ",-1),y("span",{class:"text-danger"},"*",-1)])]),_:1}),s(o(_),{modelValue:A.value.title,"onUpdate:modelValue":t[1]||(t[1]=e=>A.value.title=e),placeholder:"Contoh: Makalah Kelompok"},null,8,["modelValue"])]),_:1}),s(o(k),{class:"ion-no-padding"},{default:r(()=>[s(o(w),null,{default:r(()=>[s(o(T),{size:"6"},{default:r(()=>[s(o(b),{class:"input-item"},{default:r(()=>[s(o(x),{position:"stacked"},{default:r(()=>[...t[9]||(t[9]=[m("Mata Kuliah",-1)])]),_:1}),s(o(D),{modelValue:A.value.courseId,"onUpdate:modelValue":t[2]||(t[2]=e=>A.value.courseId=e),placeholder:"Pilih",interface:"popover"},{default:r(()=>[s(o(V),{value:null},{default:r(()=>[...t[10]||(t[10]=[m("Umum",-1)])]),_:1}),(B(!0),C(z,null,I(o(j),e=>(B(),n(o(V),{key:e.id,value:e.id},{default:r(()=>[m(f(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),s(o(T),{size:"6"},{default:r(()=>[s(o(b),{class:"input-item"},{default:r(()=>[s(o(x),{position:"stacked"},{default:r(()=>[...t[11]||(t[11]=[m("Prioritas",-1)])]),_:1}),s(o(D),{modelValue:A.value.priority,"onUpdate:modelValue":t[3]||(t[3]=e=>A.value.priority=e),interface:"popover"},{default:r(()=>[s(o(V),{value:"Tinggi"},{default:r(()=>[...t[12]||(t[12]=[m("Tinggi",-1)])]),_:1}),s(o(V),{value:"Sedang"},{default:r(()=>[...t[13]||(t[13]=[m("Sedang",-1)])]),_:1}),s(o(V),{value:"Rendah"},{default:r(()=>[...t[14]||(t[14]=[m("Rendah",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),s(o(b),{class:"input-item"},{default:r(()=>[s(o(x),{position:"stacked"},{default:r(()=>[...t[15]||(t[15]=[m("Tenggat Waktu",-1)])]),_:1}),s(o(_),{type:"date",modelValue:A.value.dueDate,"onUpdate:modelValue":t[4]||(t[4]=e=>A.value.dueDate=e)},null,8,["modelValue"])]),_:1}),y("div",re,[t[16]||(t[16]=y("label",{class:"rich-label"},"Catatan & Lampiran",-1)),y("div",se,[s(o(S),{modelValue:A.value.description,"onUpdate:modelValue":t[5]||(t[5]=e=>A.value.description=e),rows:4,placeholder:"Tulis detail tugas di sini...",class:"custom-textarea"},null,8,["modelValue"]),A.value.attachments.length>0?(B(),C("div",ue,[(B(!0),C(z,null,I(A.value.attachments,(e,a)=>{return B(),C("div",{key:a,class:"file-chip",onClick:a=>(async e=>{try{const a=await ne.readFile({path:`NyatetTugas/${e.filePath}`,directory:oe.Documents});await ne.writeFile({path:e.filePath,data:a.data,directory:oe.Cache});const t=await ne.getUri({path:e.filePath,directory:oe.Cache});await de.open({filePath:t.uri,contentType:e.fileType})}catch(a){(await M.create({message:"Gagal membuka file.",duration:2e3,color:"danger"})).present()}})(e)},[s(o(U),{icon:e.fileType.startsWith("image/")?o(L):o(N),class:"chip-icon"},null,8,["icon"]),y("span",pe,f((t=e.fileName,t.length>15?t.substring(0,12)+"...":t)),1),y("div",{class:"chip-delete",onClick:R(e=>(async e=>{const a=A.value.attachments[e];try{await ne.deleteFile({path:`NyatetTugas/${a.filePath}`,directory:oe.Documents}),console.log("File fisik berhasil dihapus dari storage")}catch(t){console.error("Gagal menghapus file fisik atau file tidak ditemukan:",t)}A.value.attachments.splice(e,1)})(a),["stop"])},[s(o(U),{icon:o(O),color:"danger"},null,8,["icon"])],8,me)],8,ce);var t}),128))])):F("",!0),y("div",fe,[s(o(v),{fill:"clear",size:"small",onClick:E},{default:r(()=>[s(o(U),{slot:"icon-only",icon:o(P)},null,8,["icon"])]),_:1}),0===A.value.attachments.length?(B(),C("span",ge,"Tambahkan foto atau dokumen...")):F("",!0)])])]),y("input",{type:"file",multiple:"",ref_key:"fileInputRef",ref:W,onChange:J,style:{display:"none"}},null,544),s(o(v),{expand:"block",class:"ion-margin-top btn-save",onClick:K,disabled:!A.value.title},{default:r(()=>[s(o(U),{slot:"start",icon:o($)},null,8,["icon"]),t[17]||(t[17]=m(" Simpan Tugas ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1},8,["is-open"]))}}),he=te(ve,[["__scopeId","data-v-dc85763b"]]),ye={slot:"end",class:"meta-end"},be={key:1,class:"empty-state"};e("default",te(t({__name:"Tab2Page",setup(e){const{tasks:a,addTask:t,updateTask:i,deleteTask:d}=ie(),{courses:_}=ae(),k=l(!1),w=l(null),T=l(null),D=l(""),V=G(()=>{let e=[...a.value];if(D.value){const a=D.value.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(a)||e.description&&e.description.toLowerCase().includes(a))}return e.sort((e,a)=>{if(e.completed!==a.completed)return e.completed?1:-1;const t=e=>"Tinggi"===e?3:"Sedang"===e?2:1,l=e=>{if(!e)return 999;const a=new Date(e).getTime()-(new Date).getTime();return Math.ceil(a/864e5)},i=10*t(e.priority)-l(e.dueDate);return 10*t(a.priority)-l(a.dueDate)-i})}),S=e=>{const a=_.value.find(a=>a.id===e);return a?a.name:"Umum"},$=e=>{if(!e)return{label:"",color:"medium"};const a=new Date;a.setHours(0,0,0,0);const t=new Date(e);t.setHours(0,0,0,0);const l=t.getTime()-a.getTime(),i=Math.ceil(l/864e5);return i<0?{label:"Terlewat",color:"danger"}:0===i?{label:"Hari Ini",color:"warning"}:1===i?{label:"Besok",color:"primary"}:{label:M(e),color:"medium"}},M=e=>e?new Date(e).toLocaleDateString("id-ID",{day:"numeric",month:"short"}):"",L=()=>{w.value=null,T.value=null,k.value=!0},N=e=>{w.value?i(w.value,e):t(e),k.value=!1};return(e,a)=>{const t=J("ion-text");return B(),n(o(j),null,{default:r(()=>[s(o(u),null,{default:r(()=>[s(o(c),null,{default:r(()=>[s(o(p),null,{default:r(()=>[...a[2]||(a[2]=[m("Daftar Tugas",-1)])]),_:1}),s(o(g),{slot:"end"},{default:r(()=>[s(o(v),{onClick:L},{default:r(()=>[s(o(U),{icon:o(H),slot:"icon-only"},null,8,["icon"])]),_:1})]),_:1})]),_:1}),s(o(c),null,{default:r(()=>[s(o(W),{modelValue:D.value,"onUpdate:modelValue":a[0]||(a[0]=e=>D.value=e),placeholder:"Cari tugas...",class:"simple-search"},null,8,["modelValue"])]),_:1})]),_:1}),s(o(h),{class:"ion-padding"},{default:r(()=>[V.value.length>0?(B(),n(o(A),{key:0},{default:r(()=>[(B(!0),C(z,null,I(V.value,e=>(B(),n(o(K),{key:e.id},{default:r(()=>[s(o(b),null,{default:r(()=>{return[s(o(q),{slot:"start",checked:e.completed,onIonChange:a=>(e=>{i(e.id,{completed:!e.completed})})(e)},null,8,["checked","onIonChange"]),s(o(x),{class:"ion-text-wrap"},{default:r(()=>[y("h2",null,f(e.title),1),y("p",null,[m(f(S(e.courseId))+" ",1),e.dueDate?(B(),n(t,{key:0,color:$(e.dueDate).color},{default:r(()=>[m(" â€¢ "+f($(e.dueDate).label),1)]),_:2},1032,["color"])):F("",!0)])]),_:2},1024),y("div",ye,[e.attachments&&e.attachments.length>0?(B(),n(o(U),{key:0,icon:o(P),color:"medium",size:"small",style:{"margin-right":"8px"}},null,8,["icon"])):F("",!0),s(o(Q),{color:(a=e.priority,"Tinggi"===a?"danger":"Sedang"===a?"warning":"success")},{default:r(()=>[m(f(e.priority),1)]),_:2},1032,["color"])])];var a}),_:2},1024),s(o(X),{side:"end"},{default:r(()=>[s(o(Y),{color:"primary",onClick:a=>(e=>{w.value=e.id,T.value=e,k.value=!0})(e)},{default:r(()=>[s(o(U),{icon:o(Z),slot:"icon-only"},null,8,["icon"])]),_:1},8,["onClick"]),s(o(Y),{color:"danger",onClick:a=>{return t=e.id,d(t);var t}},{default:r(()=>[s(o(U),{icon:o(ee),slot:"icon-only"},null,8,["icon"])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(B(),C("div",be,[s(o(U),{icon:o(E),class:"large-icon"},null,8,["icon"]),a[3]||(a[3]=y("p",null,"Belum ada tugas.",-1))])),s(he,{"is-open":k.value,"editing-id":w.value,"initial-data":T.value,onClose:a[1]||(a[1]=e=>k.value=!1),onSave:N},null,8,["is-open","editing-id","initial-data"])]),_:1})]),_:1})}}}),[["__scopeId","data-v-09ae5eb3"]]))}}});
